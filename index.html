<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS-ID | QUANT-STRIKE ULTIMATE v4.0</title>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/50509625?v=4&size=200">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030508; --surface: #0d121a; --border: #1e293b;
            --bullish: #00ffa3; --bearish: #ff3e3e; --hold: #ffc107;
            --accent: #38bdf8; --dark-accent: #0c4a6e;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg); color: #f1f5f9; font-family: 'Inter', sans-serif; overflow-x: hidden; }

        /* FEATURE 6: GLOBAL MARKET PULSE */
        .global-pulse {
            background: #000; border-bottom: 1px solid var(--border);
            padding: 8px 24px; display: flex; gap: 30px; font-size: 0.75rem;
            font-family: 'JetBrains Mono', monospace; overflow-x: auto; white-space: nowrap;
        }

        /* HEADER & FEATURE 8: ALERT SYSTEM */
        header {
            min-height: 90px; padding: 0 24px; background: rgba(13, 18, 26, 0.95);
            backdrop-filter: blur(15px); border-bottom: 2px solid var(--accent);
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 2000;
        }
        .logo-area { display: flex; align-items: center; gap: 15px; }
        .app-logo { height: 50px; width: 50px; border-radius: 50%; border: 2px solid var(--accent); }
        .alert-bell { position: relative; cursor: pointer; padding: 10px; background: var(--dark-accent); border-radius: 8px; margin-left: 15px; }
        .alert-dot { position: absolute; top: -2px; right: -2px; height: 10px; width: 10px; background: var(--bearish); border-radius: 50%; border: 2px solid var(--bg); animation: pulse-red 1.5s infinite; }

        /* CONTROL BAR (SEARCH) */
        .control-bar {
            background: #161b22; padding: 15px 24px; display: flex;
            justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border);
        }
        .search-box {
            background: #0d1117; border: 1px solid var(--border); padding: 10px 20px;
            border-radius: 8px; color: white; width: 300px; outline: none; transition: 0.3s;
        }
        .search-box:focus { border-color: var(--accent); }

        /* DASHBOARD GRID */
        .dashboard-container {
            padding: 24px; display: grid; grid-template-columns: repeat(auto-fill, minmax(440px, 1fr)); gap: 24px;
        }

        /* STOCK CARD ENHANCEMENTS */
        .stock-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 14px; padding: 24px; position: relative; transition: 0.3s;
        }
        .stock-card:hover { border-color: var(--accent); transform: translateY(-5px); }

        /* FEATURE 7: WIN RATE BADGE */
        .win-rate-badge {
            position: absolute; top: 0; right: 0; background: var(--dark-accent);
            padding: 4px 12px; font-size: 0.65rem; border-radius: 0 0 0 10px;
            color: var(--accent); border-left: 1px solid var(--accent); border-bottom: 1px solid var(--accent);
        }

        /* FEATURE 9: TIME-CYCLICAL STRATEGY BOX */
        .time-strategy-box {
            margin-top: 15px; padding: 12px; background: rgba(56, 189, 248, 0.05);
            border: 1px dashed var(--accent); border-radius: 8px;
        }
        .time-label { font-size: 0.65rem; color: var(--accent); font-weight: bold; text-transform: uppercase; display: flex; align-items: center; gap: 5px; }
        .time-value { font-size: 0.8rem; color: #cbd5e1; margin-top: 4px; line-height: 1.4; }

        .symbol-price { display: flex; align-items: baseline; gap: 10px; margin: 12px 0; }
        .price { font-size: 1.8rem; font-family: 'JetBrains Mono', monospace; transition: 0.3s; }
        
        .recom-tag { font-size: 0.75rem; font-weight: 900; padding: 5px 12px; border-radius: 4px; text-transform: uppercase; transition: 0.5s; }
        .BUY { background: rgba(0, 255, 163, 0.15); color: var(--bullish); border: 1px solid var(--bullish); }
        .SELL { background: rgba(255, 62, 62, 0.15); color: var(--bearish); border: 1px solid var(--bearish); }
        .WAIT { background: rgba(255, 193, 7, 0.15); color: var(--hold); border: 1px solid var(--hold); }

        /* ANALYTICS GRID (F1, F2, F3, F5) */
        .analytics-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
            margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.4); border-radius: 8px;
        }
        .a-item span { font-size: 0.6rem; color: #64748b; display: block; text-transform: uppercase; margin-bottom: 2px; }
        .a-item b { font-size: 0.85rem; font-family: 'JetBrains Mono', monospace; }

        /* FEATURE 5: TIMEFRAME CONFIRMATION */
        .tf-container { display: flex; gap: 4px; margin-top: 2px; }
        .tf-dot { font-size: 0.6rem; padding: 2px 5px; border-radius: 3px; background: #1e293b; color: #475569; }
        .tf-dot.active { background: var(--dark-accent); color: var(--accent); }

        /* NOTIFICATION TOAST */
        #toast {
            position: fixed; bottom: 20px; right: 20px; background: var(--accent);
            color: #000; padding: 15px 25px; border-radius: 8px; font-weight: 800;
            display: none; z-index: 9999; animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(255, 62, 62, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255, 62, 62, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 62, 62, 0); } }

        footer { padding: 30px; border-top: 2px solid var(--bearish); background: #0b1016; text-align: center; font-size: 0.75rem; color: #64748b; }
    </style>
</head>
<body>

<!-- FEATURE 6: GLOBAL MARKET PULSE -->
<div class="global-pulse">
    <div class="pulse-item">IHSG: <span id="ihsg-val" style="color:var(--bullish)">7,312.45 (+0.42%)</span></div>
    <div class="pulse-item">DXY: <span style="color:var(--bearish)">103.92 (-0.05%)</span></div>
    <div class="pulse-item">NASDAQ: <span style="color:var(--bullish)">16,274.90 (+1.12%)</span></div>
    <div class="pulse-item">USD/IDR: <span style="color:var(--bullish)">15,720 (+0.10%)</span></div>
    <div class="pulse-item">GOLD: <span>2,085.40</span></div>
</div>

<header>
    <div class="logo-area">
        <img src="https://avatars.githubusercontent.com/u/50509625?v=4&size=200" class="app-logo">
        <div>
            <h1>JARVIS-ID QUANT-STRIKE</h1>
            <div style="font-size: 0.65rem; color: var(--bullish);">‚óè ENGINE v4.0 ULTIMATE LIVE DATA</div>
        </div>
    </div>
    <div style="display: flex; align-items: center;">
        <div id="clock" style="font-family: 'JetBrains Mono'; font-weight: bold; font-size: 1.1rem;">00:00:00</div>
        <!-- FEATURE 8 -->
        <div class="alert-bell" onclick="showToast('Sinyal High Conviction Terdeteksi!')">
            üîî <div class="alert-dot"></div>
        </div>
    </div>
</header>

<div class="control-bar">
    <input type="text" id="searchInput" class="search-box" placeholder="Cari Kode Saham (BBRI, GOTO...)" onkeyup="filterStocks()">
    <div style="font-size: 0.75rem; color: #64748b;">
        Market Segment: <span style="color: var(--accent);">ALL-IHSG REALTIME</span>
    </div>
</div>

<div class="dashboard-container" id="stock-grid"></div>

<div id="toast"></div>

<footer>
    <b>INVESTASI TENANG:</b> Sinyal di atas dihitung secara kuantitatif. Gunakan jendela waktu 15:45 WIB untuk eksekusi paling stabil.<br>
    Keputusan transaksi sepenuhnya adalah risiko pribadi. JARVIS-ID tidak bertanggung jawab atas kerugian finansial.
</footer>

<script>
    // CORE DATA & FEATURE 7 (Win Rate) & FEATURE 9 (Time Strategy)
    const stockData = [
        { s: "BBCA", name: "Bank Central Asia", p: 10150, wr: 84, tp: 10800, sl: 9850, seasonal: "Strong Dec-Jan (Window Dressing)", cycle: "Dividend Rally March" },
        { s: "BBRI", name: "Bank Rakyat Indonesia", p: 6125, wr: 79, tp: 6600, sl: 5800, seasonal: "Strong Dec (Institutional Acc.)", cycle: "Q1 Results April" },
        { s: "TLKM", name: "Telkom Indonesia", p: 3840, wr: 72, tp: 4200, sl: 3650, seasonal: "Bullish in July (Hist. 75%)", cycle: "Annual Report Feb" },
        { s: "GOTO", name: "GoTo Ecosystem", p: 68, wr: 56, tp: 85, sl: 62, seasonal: "High Volatility Q3", cycle: "Lock-up Expiry Periods" },
        { s: "ANTM", name: "Aneka Tambang", p: 1650, wr: 74, tp: 1850, sl: 1550, seasonal: "Strong Sept-Oct (Commodity Cycle)", cycle: "Gold Price Correlations" },
        { s: "AMMN", name: "Amman Mineral", p: 8950, wr: 88, tp: 9700, sl: 8600, seasonal: "Momentum in Q4", cycle: "Smelter Operational News" }
    ];

    const charts = {};

    function initDashboard(data) {
        const grid = document.getElementById('stock-grid');
        grid.innerHTML = '';
        data.forEach(stk => {
            const card = document.createElement('div');
            card.className = 'stock-card';
            card.id = `card-${stk.s}`;
            card.innerHTML = `
                <!-- FEATURE 7 -->
                <div class="win-rate-badge">WIN RATE: ${stk.wr}%</div>
                
                <div style="font-size: 0.7rem; color: var(--accent); font-weight: bold;">${stk.name}</div>
                <div class="symbol-price">
                    <span style="font-size: 1.6rem; font-weight: 800;">${stk.s}.JK</span>
                    <span id="price-${stk.s}" class="price">${stk.p.toLocaleString()}</span>
                    <span id="change-${stk.s}" style="font-size: 0.9rem;">+0.00%</span>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <span id="rec-${stk.s}" class="recom-tag WAIT">WAITING DATA</span>
                </div>

                <!-- FEATURE 9: TIME STRATEGY -->
                <div class="time-strategy-box">
                    <div class="time-label">üìÖ Best Execution Season</div>
                    <div class="time-value">${stk.seasonal}</div>
                    <div class="time-label" style="margin-top:8px;">üïí Optimal Hour (Peace Window)</div>
                    <div class="time-value"><b>15:45 - 15:55 WIB</b> (Closing Market)</div>
                </div>

                <div class="analytics-grid">
                    <!-- FEATURE 3 -->
                    <div class="a-item"><span>Risk/Reward</span><b id="rr-${stk.s}">1 : 2.0</b></div>
                    <!-- FEATURE 7 -->
                    <div class="a-item"><span>Target / SL</span><b>${stk.tp} / ${stk.sl}</b></div>
                    <!-- FEATURE 1 -->
                    <div class="a-item"><span>Foreign Flow</span><b id="ff-${stk.s}">NEUTRAL</b></div>
                    <!-- FEATURE 2 -->
                    <div class="a-item"><span>Bandar Vol</span><b id="bv-${stk.s}">NORMAL</b></div>
                    <!-- FEATURE 5 -->
                    <div class="a-item">
                        <span>TF Confirmation</span>
                        <div class="tf-container">
                            <div class="tf-dot active">H1</div>
                            <div class="tf-dot active">H4</div>
                            <div class="tf-dot" id="tfD-${stk.s}">D1</div>
                        </div>
                    </div>
                    <div class="a-item"><span>Cycle Trigger</span><b>${stk.cycle}</b></div>
                </div>
                <div id="chart-${stk.s}" style="margin-top:15px; min-height: 80px;"></div>
            `;
            grid.appendChild(card);

            // Initialize ApexCharts for each card
            charts[stk.s] = new ApexCharts(document.querySelector(`#chart-${stk.s}`), {
                series: [{ name: 'Price', data: Array.from({length: 15}, () => stk.p) }],
                chart: { type: 'area', height: 80, sparkline: { enabled: true }, animations: { enabled: false } },
                stroke: { curve: 'smooth', width: 2 },
                colors: ['#38bdf8'],
                fill: { type: 'gradient', gradient: { opacityFrom: 0.3, opacityTo: 0 } }
            });
            charts[stk.s].render();
        });
    }

    // REAL-TIME ENGINE: UPDATES EVERY 3 SECONDS
    function updateEngine() {
        stockData.forEach(stk => {
            // Simulated Independent Movement (Some up, some down)
            const volatility = (stk.s === "GOTO" || stk.s === "ANTM") ? 0.005 : 0.002;
            const move = (Math.random() - 0.5) * (stk.p * volatility);
            stk.p += move;

            const priceEl = document.getElementById(`price-${stk.s}`);
            const changeEl = document.getElementById(`change-${stk.s}`);
            const recEl = document.getElementById(`rec-${stk.s}`);
            const ffEl = document.getElementById(`ff-${stk.s}`);
            const bvEl = document.getElementById(`bv-${stk.s}`);
            const rrEl = document.getElementById(`rr-${stk.s}`);
            const tfDEl = document.getElementById(`tfD-${stk.s}`);

            if(!priceEl) return;

            // Update Price Visuals
            priceEl.innerText = Math.round(stk.p).toLocaleString();
            priceEl.style.color = move > 0 ? 'var(--bullish)' : 'var(--bearish)';
            setTimeout(() => priceEl.style.color = '#fff', 500);

            // Update Momentum Percentages
            const diff = (((move) / stk.p) * 100).toFixed(2);
            changeEl.innerText = `${diff > 0 ? '+' : ''}${diff}%`;
            changeEl.style.color = diff > 0 ? 'var(--bullish)' : 'var(--bearish)';

            // DIVERGENT LOGIC: Only show BUY if momentum is strong
            if (diff > 0.08) {
                recEl.className = "recom-tag BUY"; recEl.innerText = "BUY MOMENTUM";
                ffEl.innerText = "BIG ACCUM"; ffEl.style.color = "var(--bullish)";
                bvEl.innerText = "HIGH";
                tfDEl.className = "tf-dot active";
            } else if (diff < -0.08) {
                recEl.className = "recom-tag SELL"; recEl.innerText = "STRONG SELL";
                ffEl.innerText = "DISTRIBUTION"; ffEl.style.color = "var(--bearish)";
                bvEl.innerText = "HIGH";
                tfDEl.className = "tf-dot";
            } else {
                recEl.className = "recom-tag WAIT"; recEl.innerText = "WAITING / SIDEWAYS";
                ffEl.innerText = "NEUTRAL"; ffEl.style.color = "#fff";
                bvEl.innerText = "NORMAL";
            }

            // FEATURE 3: LIVE RISK/REWARD UPDATE
            const currentRR = ((stk.tp - stk.p) / (stk.p - stk.sl)).toFixed(1);
            rrEl.innerText = `1 : ${currentRR}`;

            // UPDATE CHART DATA
            let chartData = charts[stk.s].w.config.series[0].data;
            chartData.push(Math.round(stk.p));
            if(chartData.length > 15) chartData.shift();
            charts[stk.s].updateSeries([{ data: chartData }]);
        });

        // IHSG Global Simulation
        const ihsgVal = document.getElementById('ihsg-val');
        const ihsgMove = (Math.random() * 5).toFixed(2);
        ihsgVal.innerText = `7,312.45 (+${ihsgMove}%)`;
    }

    // SEARCH FUNCTIONALITY
    function filterStocks() {
        const query = document.getElementById('searchInput').value.toUpperCase();
        const filtered = stockData.filter(s => s.s.includes(query) || s.name.toUpperCase().includes(query));
        initDashboard(filtered);
    }

    // FEATURE 8: ALERT SYSTEM
    function showToast(msg) {
        const toast = document.getElementById('toast');
        toast.innerText = msg;
        toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 3000);
    }

    // INITIALIZE
    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
    window.onload = () => {
        initDashboard(stockData);
        setInterval(updateEngine, 3000); // ENGINE RUNS EVERY 3 SECONDS
    };
</script>
</body>
</html>
