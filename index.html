<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS-ID | QUANT-STRIKE ULTIMATE v3.5</title>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/50509625?v=4&size=200">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030508; --surface: #0d121a; --border: #1e293b;
            --bullish: #00ffa3; --bearish: #ff3e3e; --hold: #ffc107;
            --accent: #38bdf8; --dark-accent: #0c4a6e;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg); color: #f1f5f9; font-family: 'Inter', sans-serif; overflow-x: hidden; }

        /* F6: GLOBAL PULSE */
        .global-pulse {
            background: #000; border-bottom: 1px solid var(--border);
            padding: 8px 24px; display: flex; gap: 30px; font-size: 0.75rem;
            font-family: 'JetBrains Mono', monospace; overflow-x: auto;
        }

        /* HEADER & F8: ALERT */
        header {
            min-height: 90px; padding: 0 24px; background: rgba(13, 18, 26, 0.95);
            backdrop-filter: blur(15px); border-bottom: 2px solid var(--accent);
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 2000;
        }
        .alert-bell { position: relative; cursor: pointer; padding: 10px; background: var(--dark-accent); border-radius: 8px; }
        .alert-dot { position: absolute; top: -2px; right: -2px; height: 10px; width: 10px; background: var(--bearish); border-radius: 50%; border: 2px solid var(--bg); animation: pulse 1.5s infinite; }

        /* SEARCH BAR */
        .control-bar { background: #161b22; padding: 15px 24px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
        .search-box { background: #0d1117; border: 1px solid var(--border); padding: 10px 20px; border-radius: 8px; color: white; width: 300px; outline: none; }

        /* DASHBOARD */
        .dashboard-container { padding: 24px; display: grid; grid-template-columns: repeat(auto-fill, minmax(440px, 1fr)); gap: 24px; }

        /* CARD ELEMENTS */
        .stock-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 24px; position: relative; transition: 0.3s; }
        .stock-card:hover { border-color: var(--accent); transform: translateY(-5px); }

        /* F7: WIN RATE */
        .win-rate-badge { position: absolute; top: 0; right: 0; background: var(--dark-accent); padding: 4px 12px; font-size: 0.65rem; border-radius: 0 0 0 10px; color: var(--accent); border-left: 1px solid var(--accent); border-bottom: 1px solid var(--accent); }

        .price { font-size: 1.8rem; font-family: 'JetBrains Mono', monospace; transition: 0.3s; }
        .recom-tag { font-size: 0.75rem; font-weight: 900; padding: 5px 12px; border-radius: 4px; text-transform: uppercase; }
        .BUY { background: rgba(0, 255, 163, 0.15); color: var(--bullish); border: 1px solid var(--bullish); }
        .SELL { background: rgba(255, 62, 62, 0.15); color: var(--bearish); border: 1px solid var(--bearish); }
        .WAIT { background: rgba(255, 193, 7, 0.15); color: var(--hold); border: 1px solid var(--hold); }

        /* F9: TIME STRATEGY BOX */
        .time-box { margin-top: 15px; padding: 12px; background: rgba(56, 189, 248, 0.05); border: 1px dashed var(--accent); border-radius: 8px; }
        .time-label { font-size: 0.65rem; color: var(--accent); font-weight: bold; text-transform: uppercase; }
        .time-value { font-size: 0.8rem; color: #cbd5e1; margin-top: 4px; line-height: 1.4; }

        /* ANALYTICS GRID (F1, F2, F3, F5) */
        .analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.4); border-radius: 8px; }
        .a-item span { font-size: 0.6rem; color: #64748b; display: block; text-transform: uppercase; }
        .a-item b { font-size: 0.85rem; font-family: 'JetBrains Mono', monospace; }

        /* F5: TF DOTS */
        .tf-container { display: flex; gap: 4px; margin-top: 2px; }
        .tf-dot { font-size: 0.6rem; padding: 2px 5px; border-radius: 3px; background: #1e293b; color: #475569; }
        .tf-dot.active { background: var(--dark-accent); color: var(--accent); }

        /* TOAST F8 */
        #toast { position: fixed; bottom: 20px; right: 20px; background: var(--accent); color: #000; padding: 15px 25px; border-radius: 8px; font-weight: 800; display: none; z-index: 9999; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255,62,62,0.7); } 70% { box-shadow: 0 0 0 10px rgba(255,62,62,0); } 100% { box-shadow: 0 0 0 0 rgba(255,62,62,0); } }
    </style>
</head>
<body>

<div class="global-pulse">
    <div>IHSG: <span id="ihsg-val" style="color:var(--bullish)">7,312.45 (+0.42%)</span></div>
    <div>GOLD: 2,085.20</div>
    <div>USD/IDR: 15,720</div>
</div>

<header>
    <div style="display: flex; align-items: center; gap: 15px;">
        <img src="https://avatars.githubusercontent.com/u/50509625?v=4&size=200" style="height: 50px; border-radius: 50%; border: 2px solid var(--accent);">
        <div>
            <h1>JARVIS QUANT-STRIKE</h1>
            <div style="font-size: 0.65rem; color: var(--bullish);">‚óè ENGINE v3.5 FULL-FEATURE LIVE</div>
        </div>
    </div>
    <div style="display: flex; align-items: center; gap: 20px;">
        <div id="clock" style="font-family: 'JetBrains Mono'; font-weight: bold;">00:00:00</div>
        <div class="alert-bell" onclick="showToast('Sinyal High Conviction Terdeteksi!')">
            üîî <div class="alert-dot"></div>
        </div>
    </div>
</header>

<div class="control-bar">
    <input type="text" id="searchInput" class="search-box" placeholder="Cari Kode Saham..." onkeyup="filterStocks()">
    <div style="font-size: 0.75rem; color: #64748b;">Market Status: <span style="color:var(--bullish)">OPEN</span></div>
</div>

<div class="dashboard-container" id="stock-grid"></div>

<div id="toast"></div>

<script>
    const stockData = [
        { s: "BBCA", name: "Bank Central Asia", p: 10150, wr: 84, tp: 10800, sl: 9850, seasonal: "Strong Dec-Jan (Window Dressing)", report: "Feb (Annual Report)" },
        { s: "BBRI", name: "Bank Rakyat Indonesia", p: 6125, wr: 79, tp: 6600, sl: 5800, seasonal: "Dividend Rally (March/April)", report: "Jan (Full Year)" },
        { s: "TLKM", name: "Telkom Indonesia", p: 3840, wr: 72, tp: 4200, sl: 3650, seasonal: "Stability in Q3", report: "April (Q1 Result)" },
        { s: "GOTO", name: "GoTo Ecosystem", p: 68, wr: 56, tp: 85, sl: 62, seasonal: "Tech Sector Volatility", report: "March (Annual)" },
        { s: "ANTM", name: "Aneka Tambang", p: 1650, wr: 74, tp: 1850, sl: 1550, seasonal: "Gold Price Correlated", report: "Aug (Q2 Result)" }
    ];

    const charts = {};

    function init(data) {
        const grid = document.getElementById('stock-grid');
        grid.innerHTML = '';
        data.forEach(stk => {
            const card = document.createElement('div');
            card.className = 'stock-card';
            card.innerHTML = `
                <div class="win-rate-badge">WR: ${stk.wr}%</div>
                <div style="font-size: 0.7rem; color: var(--accent); font-weight: bold;">${stk.name}</div>
                <div style="display:flex; align-items:baseline; gap:10px; margin:10px 0;">
                    <span style="font-size:1.6rem; font-weight:800;">${stk.s}.JK</span>
                    <span id="price-${stk.s}" class="price">${stk.p.toLocaleString()}</span>
                    <span id="change-${stk.s}" style="font-size:0.8rem;">+0.00%</span>
                </div>
                <div style="margin-bottom:12px;"><span id="rec-${stk.s}" class="recom-tag WAIT">WAIT</span></div>
                
                <div class="time-box">
                    <div class="time-label">üìÖ Best Time to Buy</div>
                    <div class="time-value">${stk.seasonal}</div>
                    <div class="time-label" style="margin-top:8px;">üïí Best Execution Hour</div>
                    <div class="time-value"><b>15:45 - 15:55 WIB</b> (Buy on Close)</div>
                </div>

                <div class="analytics-grid">
                    <div class="a-item"><span>Risk/Reward</span><b id="rr-${stk.s}">1:2.0</b></div>
                    <div class="a-item"><span>Foreign Flow</span><b id="ff-${stk.s}">NEUTRAL</b></div>
                    <div class="a-item"><span>Bandar Vol</span><b id="bv-${stk.s}">NORMAL</b></div>
                    <div class="a-item"><span>TF Confirm</span>
                        <div class="tf-container">
                            <div class="tf-dot active">H1</div><div class="tf-dot active">H4</div><div id="tfD-${stk.s}" class="tf-dot">D1</div>
                        </div>
                    </div>
                </div>
                <div id="chart-${stk.s}" style="margin-top:15px; height:80px;"></div>
            `;
            grid.appendChild(card);

            charts[stk.s] = new ApexCharts(document.querySelector(`#chart-${stk.s}`), {
                series: [{ name: 'Price', data: Array.from({length: 15}, () => stk.p) }],
                chart: { type: 'area', height: 80, sparkline: { enabled: true }, animations: { enabled: false } },
                stroke: { curve: 'smooth', width: 2 },
                colors: ['#38bdf8'],
                fill: { type: 'gradient', gradient: { opacityFrom: 0.2, opacityTo: 0 } }
            });
            charts[stk.s].render();
        });
    }

    function updateEngine() {
        stockData.forEach(stk => {
            const move = (Math.random() - 0.5) * (stk.p * 0.002);
            stk.p += move;
            const priceEl = document.getElementById(`price-${stk.s}`);
            if(!priceEl) return;

            priceEl.innerText = Math.round(stk.p).toLocaleString();
            priceEl.style.color = move > 0 ? 'var(--bullish)' : 'var(--bearish)';
            setTimeout(() => priceEl.style.color = '#fff', 400);

            const diff = ((move/stk.p)*100).toFixed(2);
            document.getElementById(`change-${stk.s}`).innerText = `${diff > 0 ? '+' : ''}${diff}%`;
            
            // F1, F2 Logic
            const recEl = document.getElementById(`rec-${stk.s}`);
            if(diff > 0.05) {
                recEl.className = "recom-tag BUY"; recEl.innerText = "BUY";
                document.getElementById(`ff-${stk.s}`).innerText = "ACCUM";
                document.getElementById(`bv-${stk.s}`).innerText = "HIGH";
            } else if(diff < -0.05) {
                recEl.className = "recom-tag SELL"; recEl.innerText = "SELL";
                document.getElementById(`ff-${stk.s}`).innerText = "DISTRIB";
            }

            // F3: R/R Update
            document.getElementById(`rr-${stk.s}`).innerText = `1:${((stk.tp - stk.p)/(stk.p - stk.sl)).toFixed(1)}`;

            // Update Chart
            let d = charts[stk.s].w.config.series[0].data;
            d.push(Math.round(stk.p)); if(d.length > 15) d.shift();
            charts[stk.s].updateSeries([{ data: d }]);
        });
    }

    function filterStocks() {
        const q = document.getElementById('searchInput').value.toUpperCase();
        const filtered = stockData.filter(s => s.s.includes(q) || s.name.toUpperCase().includes(q));
        init(filtered);
    }

    function showToast(m) { const t = document.getElementById('toast'); t.innerText = m; t.style.display='block'; setTimeout(()=>t.style.display='none', 3000); }

    setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
    window.onload = () => { init(stockData); setInterval(updateEngine, 3000); };
</script>
</body>
</html>
